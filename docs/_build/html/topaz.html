<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Topaz &mdash; tem-docs 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="FAQs" href="faq.html" />
    <link rel="prev" title="CryoSPARC" href="cryoSPARC.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            tem-docs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="newfarm.html">GSDC Computing Cluster for TEM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#service-overview">1. Service overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#computing-and-storage-resources">2. Computing and storage resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#cluster-management-softwares">3. Cluster management softwares</a></li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#data-analysis-tools">4. Data analysis tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#requesting-user-accounts-and-accessing-gsdc-tem-computing-cluster">5. Requesting user accounts and accessing GSDC TEM computing cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#module-paths-and-job-submission-templates">6. Module paths and job submission templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="newfarm.html#module-paths-for-data-analysis-tools">Module paths for data analysis tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="newfarm.html#job-submission-templates">Job submission templates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#batch-queues">7. Batch queues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="newfarm.html#checking-batch-queue-names-and-their-status">Checking batch queue names and their status</a></li>
<li class="toctree-l3"><a class="reference internal" href="newfarm.html#checking-all-worker-nodes-status">Checking all worker nodes status</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#fstat-bin-monitoring-the-usage-of-all-the-worker-nodes">8. fstat.bin : Monitoring the usage of all the worker nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="newfarm.html#dynmotd-checking-storage-quota-limit-and-usage-ratio">9. dynmotd : Checking storage quota limit and usage ratio</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">TEM Computing Cluster Basics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="guide.html#requesting-accounts-and-accessing-tem-cluster">Requesting accounts and accessing TEM cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="guide.html#for-linux-mac-users">For Linux/Mac users</a></li>
<li class="toctree-l3"><a class="reference internal" href="guide.html#for-windows-users">For Windows users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="guide.html#understanding-environment-modules">Understanding environment modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="guide.html#job-manager-torque">Job manager (Torque)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="guide.html#resources-manager-and-job-scheduler">Resources manager and job scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="guide.html#directives-in-torque-job-scripts">Directives in Torque job scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="guide.html#resource-limits"><strong>Resource limits</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#job-name"><strong>Job name</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#queue-name"><strong>Queue name</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#job-log-files"><strong>Job log files</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="guide.html#torque-job-script-examples">Torque job script examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="guide.html#simple-sequential-job"><strong>Simple sequential job</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#serial-job-with-openmp-multithreading"><strong>Serial job with OpenMP multithreading</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#simple-mpi-parallel-job"><strong>Simple MPI parallel job</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#parallel-job-with-mpi-and-openmp"><strong>Parallel job with MPI and OpenMP</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="guide.html#job-submission">Job submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="guide.html#monitoring-and-managing-your-jobs">Monitoring and managing your jobs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="guide.html#status-of-queued-jobs"><strong>Status of queued jobs</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="guide.html#managing-your-jobs"><strong>Managing your jobs</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="queue.html">Batch Queues</a><ul>
<li class="toctree-l2"><a class="reference internal" href="queue.html#batch-queue-list">Batch queue list</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="relion.html">Relion</a><ul>
<li class="toctree-l2"><a class="reference internal" href="relion.html#executing-relion-gui-tools">Executing Relion GUI tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="relion.html#how-to-start-relion-data-analysis-tool">How to start Relion data analysis tool</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="relion.html#pbs-strings-used-in-relion">PBS Strings used in Relion</a></li>
<li class="toctree-l2"><a class="reference internal" href="relion.html#running-data-analysis-jobs-using-cpu-cores">Running data analysis jobs using CPU cores</a><ul>
<li class="toctree-l3"><a class="reference internal" href="relion.html#module-path">Module path</a></li>
<li class="toctree-l3"><a class="reference internal" href="relion.html#environment-variables">Environment variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="relion.html#standard-job-submission-script-for-relion-4-0-0-cpu-use">Standard job submission script (for relion 4.0.0 CPU use)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="relion.html#running-data-analysis-jobs-using-gpgpus">Running data analysis jobs using GPGPUs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="relion.html#id1">Environment variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="relion.html#standard-job-submission-script-for-relion-4-0-0-gpgpu-use">Standard job submission script (for relion 4.0.0 GPGPU use)</a></li>
<li class="toctree-l3"><a class="reference internal" href="relion.html#specifying-which-gpgpus-to-use">Specifying which GPGPUs to use</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="relion.html#examples">Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="relion.html#motion-correction">Motion Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="relion.html#ctf-estimation">CTF Estimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="relion.html#d-classification">2D Classification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cisTEM.html">cisTEM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cisTEM.html#executing-cistem">Executing cisTEM</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cisTEM.html#how-to-start-cistem-data-analysis-tool">How to start cisTEM data analysis tool</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cisTEM.html#run-profiles-for-job-submission">Run profiles for job submission</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cisTEM.html#profile-templates">Profile templates</a></li>
<li class="toctree-l3"><a class="reference internal" href="cisTEM.html#adding-a-new-run-profile">Adding a new Run Profile</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cisTEM.html#examples-of-running-cistem-jobs">Examples of running cisTEM jobs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cisTEM.html#importing-movies-and-images">Importing Movies and images</a></li>
<li class="toctree-l3"><a class="reference internal" href="cisTEM.html#movie-alignment">Movie Alignment</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cryoSPARC.html">CryoSPARC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cryoSPARC.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryoSPARC.html#getting-a-cryosparc-instance">Getting a cryoSPARC instance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#admin-install-and-setup-a-cryosparc-instance">1. (Admin) Install and setup a cryoSPARC instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#user-verifying-installation">2. (User) Verifying installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cryoSPARC.html#launching-cryosparc-instance">Launching CryoSPARC instance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#for-linux-mac-users">For Linux/Mac users</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#for-windows-users">For Windows users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cryoSPARC.html#exploring-cryosparc-web-apps">Exploring CryoSPARC web apps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#cryosparc-login">CryoSPARC login</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#cryosparc-dashboard">CryoSPARC dashboard</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#cryosparc-project">CryoSPARC project</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#cryosparc-cluster-lane">CryoSPARC cluster(lane)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cryoSPARC.html#tutorial-on-processing-t20s">Tutorial on processing T20S</a></li>
<li class="toctree-l2"><a class="reference internal" href="cryoSPARC.html#trouble-shooting">Trouble shooting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#how-to-stop-or-start-the-cryosparc-instance">1. How to stop or start the cryoSPARC instance?</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#how-to-reset-the-password-of-non-admin-user">2. How to reset the password of non-admin user?</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#job-or-workflow-failed-caused-by-ssd-caching">3. Job (or Workflow) failed caused by <strong>SSD caching</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#failed-to-launch-190">4. Failed to launch! 190</a></li>
<li class="toctree-l3"><a class="reference internal" href="cryoSPARC.html#binary-locations-of-gctf-motioncor2">5. Binary locations of Gctf, MotionCor2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Topaz</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#topaz-executables">Topaz Executables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#topaz-binary-executable-with-cuda-9-2">Topaz binary executable with CUDA 9.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#topaz-binary-executable-with-cuda-11-2">Topaz binary executable with CUDA 11.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#using-topaz-in-cryosparc">Using Topaz in CryoSPARC</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-topaz-in-relion-v3-1-0-above">Using Topaz in Relion (v3.1.0 above)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-to-resolve-the-problems-on-re-starting-your-own-cryosparc-instance">How to resolve the problems on (re)starting your own cryosparc instance?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-to-repair-cryosparc-database-corruption">How to repair cryosparc database corruption?</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html#how-to-upgrade-or-downgrade-to-the-specific-version-of-cryosparc-softwares">How to upgrade (or downgrade) to the specific version of cryosparc softwares?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="faq.html#checking-for-updates">1. Checking for updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#before-you-update-complete-or-kill-running-jobs">2. Before you update: complete or kill running jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#back-up-cryosparc-databases">3. Back-up cryosparc databases</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#cryosparc-master-updates">4. Cryosparc master updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#cryosparc-worker-updates">5. Cryosparc worker updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="faq.html#running-the-newer-cryosparc-instance">6. Running the newer cryosparc instance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="app.html">APPENDIX : Application Form &amp; Materials </a><ul>
<li class="toctree-l2"><a class="reference internal" href="app.html#gsdc-tem-application-form">GSDC TEM Application Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="app.html#tutorial">Tutorial</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contacts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tem-docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Topaz</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/topaz.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="topaz">
<span id="id1"></span><h1>Topaz<a class="headerlink" href="#topaz" title="Permalink to this heading"></a></h1>
<p>A pipeline for particle detection in cryo-electron microscopy images using convolutional neural networks trained from positive and unlabeled examples.
Topaz also includes methods for micrograph and tomogram denoising using deep denoising models.</p>
<ul class="simple">
<li><p>Official <strong>Topaz</strong> site : <a class="reference external" href="http://cb.csail.mit.edu/cb/topaz/">http://cb.csail.mit.edu/cb/topaz/</a></p></li>
</ul>
<section id="topaz-executables">
<h2>Topaz Executables<a class="headerlink" href="#topaz-executables" title="Permalink to this heading"></a></h2>
<p>Basically, topaz uses NVIDIA GPUs with CUDA support for GPU acceleration in order to provide the features like automatic particle picking, denoising, etc.
Here, we have installed Topaz into seperate conda environments, where each is built upon CUDA 9.x and CUDA 11.x.
You can find out each version of topaz executables with the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>module<span class="w"> </span>avail

--------<span class="w"> </span>/tem/el7/Modules/apps<span class="w"> </span>--------
apps/cistem/1.0.0
apps/relion/cpu/3.0.7
apps/relion/cpu/3.1.0
apps/relion/cpu/4.0.0
apps/relion/gpu/3.0.7
apps/relion/gpu/3.1.0
apps/relion/gpu/4.0.0

----<span class="w"> </span>/tem/el7/Modules/acceleration<span class="w"> </span>----
cuda/9.2<span class="w">  </span>cuda/11.2

--------<span class="w"> </span>/tem/el7/Modules/mpi<span class="w"> </span>---------
mpi/gcc/4.8.5/openmpi/4.0.3
mpi/gcc/8.3.1/mpich/3.4.3
mpi/gcc/8.3.1/openmpi/4.0.3
mpi/gcc/openmpi/4.0.3

-----<span class="w"> </span>/tem/el7/Modules/virtualenv<span class="w"> </span>-----
conda/2020.11<span class="w">  </span>topaz/cuda-9.2/0.2.4
pyem/0.5<span class="w">       </span>topaz/cuda-11.0/0.2.4

-------<span class="w"> </span>/tem/el7/Modules/tools<span class="w"> </span>--------
tools/aspera-cli/3.9.6
tools/ctffind/4.1.14
tools/gctf/1.18_b2
tools/motioncor2/1.3.1
tools/resmap/1.1.4
tools/summovie/1.0.2
tools/unblur/1.0.2

-----<span class="w"> </span>/tem/el7/Modules/experiment<span class="w"> </span>-----
PyRosetta/4
python/3.7
rosetta/mpich-3.4.3/3.13
rosetta/openmpi-4.0.3/3.13
</pre></div>
</div>
<section id="topaz-binary-executable-with-cuda-9-2">
<h3>Topaz binary executable with CUDA 9.2<a class="headerlink" href="#topaz-binary-executable-with-cuda-9-2" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>topaz/cuda-9.2/0.2.4
Loading<span class="w"> </span>topaz/cuda-9.2/0.2.4
<span class="w">  </span>Loading<span class="w"> </span>requirement:<span class="w"> </span>conda/2020.11

<span class="o">(</span>topaz-v0.2.4-cuda9.2<span class="o">)</span><span class="w"> </span>$&gt;
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>topaz-v0.2.4-cuda9.2<span class="o">)</span><span class="w"> </span>$&gt;<span class="w"> </span>which<span class="w"> </span>topaz
/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda9.2/bin/topaz
</pre></div>
</div>
<p>With above command, you can find that the path of topaz executable with CUDA 9.x support is <strong>/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda9.2/bin/topaz</strong>.</p>
</section>
<section id="topaz-binary-executable-with-cuda-11-2">
<h3>Topaz binary executable with CUDA 11.2<a class="headerlink" href="#topaz-binary-executable-with-cuda-11-2" title="Permalink to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>topaz/cuda-11.0/0.2.4
Loading<span class="w"> </span>topaz/cuda-11.0/0.2.4
<span class="w">  </span>Loading<span class="w"> </span>requirement:<span class="w"> </span>conda/2020.11

<span class="o">(</span>topaz-v0.2.4-cuda11.0<span class="o">)</span><span class="w"> </span>$&gt;
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>topaz-v0.2.4-cuda11.0<span class="o">)</span><span class="w"> </span>$&gt;<span class="w"> </span>which<span class="w"> </span>topaz
/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda11.0/bin/topaz
</pre></div>
</div>
<p>With above command, you can find that the path of topaz executable with CUDA 11.x support is <strong>/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda11.0/bin/topaz</strong>.</p>
</section>
</section>
<section id="using-topaz-in-cryosparc">
<h2>Using Topaz in CryoSPARC<a class="headerlink" href="#using-topaz-in-cryosparc" title="Permalink to this heading"></a></h2>
<p>If your CryoSPARC instance’s version is v3.0.1, you should use the topaz executable <strong>/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda9.2/bin/topaz</strong> because the CryoSPARC is built upon CUDA 9.2 support.
Otherwise if you use CryoSPARC v3.2.0+, the topaz executable is <strong>/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda11.0/bin/topaz</strong>.</p>
<p>Please refer to <a class="reference external" href="https://guide.cryosparc.com/processing-data/all-job-types-in-cryosparc/deep-picking/topaz">https://guide.cryosparc.com/processing-data/all-job-types-in-cryosparc/deep-picking/topaz</a> for executing topaz jobs in CryoSPARC.</p>
</section>
<section id="using-topaz-in-relion-v3-1-0-above">
<h2>Using Topaz in Relion (v3.1.0 above)<a class="headerlink" href="#using-topaz-in-relion-v3-1-0-above" title="Permalink to this heading"></a></h2>
<p>To run topaz jobs within relion data analysis tool, you <strong>SHOULD USE Relion v3.1 above and Topaz v0.2.4 above</strong>. For your conveneince, we have cloned all the <strong>relion_run_topaz</strong> packages to GSDC TEM farm.</p>
<p>Here is the location of <strong>relion_run_topaz</strong> packages:</p>
<ul class="simple">
<li><p><strong>/tem/el7/topaz/relion_run_topaz/run_topaz_denoise.py</strong></p></li>
<li><p><strong>/tem/el7/topaz/relion_run_topaz/run_topaz_pick.py</strong></p></li>
<li><p><strong>/tem/el7/topaz/relion_run_topaz/run_topaz_train.py</strong></p></li>
<li><p><strong>/tem/el7/topaz/relion_run_topaz/run_topaz_train_denoise.py</strong></p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$&gt;<span class="w"> </span><span class="nb">pwd</span>
/tem/el7/topaz/relion_run_topaz
<span class="o">[</span>tem@tem-cs-el7<span class="w"> </span>relion_run_topaz<span class="o">]</span>$<span class="w"> </span>tree<span class="w"> </span>.
.
├──<span class="w"> </span>LICENSE
├──<span class="w"> </span>README.md
├──<span class="w"> </span>run_topaz_denoise.py
├──<span class="w"> </span>run_topaz_pick.py
├──<span class="w"> </span>run_topaz_train.py
└──<span class="w"> </span>run_topaz_train_denoise.py

<span class="m">0</span><span class="w"> </span>directories,<span class="w"> </span><span class="m">6</span><span class="w"> </span>files
</pre></div>
</div>
<p>Since Relion v3.1+ has built using CUDA 9.2 support, we have modified <strong>topaz_path</strong> with this executable <strong>/tem/el7/conda3-2020.11/envs/topaz-v0.2.4-cuda9.2/bin/topaz</strong> in all the above python scripts.</p>
<p>For an external job type in relion GUI, after providing python executable path, inputs and optional parameters, you can use one of the following job submission templates.</p>
<ul class="simple">
<li><p><strong>/tem/el7/qsub-relion-3.1.0-topaz.bash</strong></p></li>
<li><p><strong>/tem/el7/qsub-relion-4.0.0-topaz.bash</strong></p></li>
</ul>
<a class="reference internal image-reference" href="_images/relion-topaz.png"><img alt="_images/relion-topaz.png" class="align-center" src="_images/relion-topaz.png" style="width: 794.0px; height: 423.0px;" /></a>
<a class="reference internal image-reference" href="_images/relion-topaz2.png"><img alt="_images/relion-topaz2.png" class="align-center" src="_images/relion-topaz2.png" style="width: 853.0px; height: 500.0px;" /></a>
<p>Note that both number of nodes and number of GPUs are set to 1 due to the lack of parallelism across multiple servers and GPUs in Topaz application.
For more details on running topaz jobs in relion (using external job type), please refer to <a class="reference external" href="https://github.com/tbepler/topaz/tree/master/relion_run_topaz">https://github.com/tbepler/topaz/tree/master/relion_run_topaz</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cryoSPARC.html" class="btn btn-neutral float-left" title="CryoSPARC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="faq.html" class="btn btn-neutral float-right" title="FAQs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, GSDC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>